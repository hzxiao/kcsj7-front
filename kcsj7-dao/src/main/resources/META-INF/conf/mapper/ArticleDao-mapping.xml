<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kcsj7.view.dao.mapper.ArticleDao">
    <insert id="addArticle" parameterType="Map" flushCache="true">
        INSERT INTO article_basic (
        title, tag, content
        <if test="status != null">
            ,status
        </if>
        <if test="programaId != null">
            ,programa_id
        </if>
        ,category, source
        <if test="reateBy != null">
            ,reate_by
        </if>
        ,create_name, create_date, update_date)
        values(
        #{title}, #{tag}, #{content}
        <if test="status != null">
            ,#{status}
        </if>
        <if test="programaId != null">
            , #{programaId}
        </if>
        ,#{category}, #{source}
        <if test="reateBy != null">
            ,#{reateBy}
        </if>
        ,#{createName}, now(), now()
        )
    </insert>

    <select id="selectArticleById" parameterType="Integer" resultType="Map">
        SELECT A.article_id AS articleId, A.title, tag, content, A.status, source, category,
        view_count AS viewCount, P.programa_name AS programaName, comment_count AS commentCount,
        good_comment_count as goodCommentCount, bad_comment_count AS bsdCommentCount,
        A.update_date AS updateDate, A.create_date AS createDate, B.username AS username
        FROM (article_basic A LEFT JOIN programa P ON A.programa_id = P.programa_id)
         LEFT JOIN user_basic B ON B.user_id = A.reate_by
        WHERE A.article_id = #{articleId}
    </select>
</mapper>